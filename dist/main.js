(()=>{"use strict";const e=(()=>{let e=new Array;const t=(e,t,o,r,a)=>{e.title=t,e.description=o,e.dueDate=r,e.priority=a,n()},n=()=>{null!=localStorage&&localStorage.removeItem("tasks"),localStorage.setItem("tasks",JSON.stringify(e))};return{createNewTask:(t,o,r,a,l)=>{const c={};c.title=t,c.description=o,c.dueDate=r,c.priority=a,c.checked=!1,c.projectIndex=l,e.push(c),n()},returnTasks:()=>e,deleteTask:t=>{let o=e.indexOf(t);e.splice(o,1),n()},editTask:t,isChecked:e=>!!e.checked,setChecked:(e,t)=>{e.checked=t},editTask:t,initializeTasksFromStorage:()=>{e=JSON.parse(localStorage.getItem("tasks"))}}})(),t=(()=>{let e=new Array;const t=()=>{null!=localStorage&&localStorage.removeItem("projects"),localStorage.setItem("projects",JSON.stringify(e)),console.log(localStorage.getItem("projects"))};return{createNewProject:n=>{e.push(n),t()},deleteProject:n=>{let o=e.indexOf(n);e.splice(o,1),t()},getProjects:()=>e,initializeProjectsFromStorage:()=>{e=JSON.parse(localStorage.getItem("projects"))}}})(),n=(()=>{const e=document.querySelector(".listOfProjects"),n=document.querySelector(".projectCount");return{newProjectItem:()=>{document.querySelector(".addProject").addEventListener("click",(()=>{const r=prompt("Enter the name of your Project:");t.createNewProject(r);const a=document.createElement("li");a.classList.add("projectItem");let l=document.createElement("span");l.classList.add("projectName"),l.textContent=r,a.appendChild(l);const c=document.createElement("button");c.classList.add("deleteProject"),c.textContent="X",a.append(c),e.appendChild(a),n.textContent=t.getProjects().length,o()}))},displayProjects:()=>{t.getProjects().forEach((o=>{const r=document.createElement("li");r.classList.add("projectItem");let a=document.createElement("span");a.classList.add("projectName"),a.textContent=o,r.appendChild(a);const l=document.createElement("button");l.classList.add("deleteProject"),l.textContent="X",r.append(l),e.appendChild(r),n.textContent=t.getProjects().length}))}}})(),o=()=>{const n=document.querySelector(".projectCount");[...document.querySelectorAll(".deleteProject")].forEach((o=>{o.addEventListener("click",(()=>{const r=document.querySelector("#listOfTasks"),a=document.querySelector(".listOfProjects");let l=o.previousElementSibling,c=t.getProjects().indexOf(l.textContent);t.deleteProject(l.textContent),n.textContent=t.getProjects().length,a.hasChildNodes()&&a.removeChild(l.parentElement);const d=e.returnTasks().filter((e=>e.projectIndex===c));console.log(d),d.forEach((t=>{console.log("here"),r.childNodes.forEach((e=>{console.log(e),e.firstChild.lastChild.textContent===t.title&&r.removeChild(e)})),e.deleteTask(t)}))}))}))},r=n,a=t=>{(()=>{const e=document.querySelector("#taskList"),t=document.querySelector("#listOfTasks");t&&e.removeChild(t);const n=document.createElement("ul");n.id="listOfTasks",e.append(n)})();const n=document.querySelector("#listOfTasks");for(let o of t){let t=document.createElement("li");t.classList.add("tasks");let r=document.createElement("div"),a=document.createElement("input");a.type="checkbox",a.classList.add("checkbox"),a.setAttribute("id",o.title),e.isChecked(o)&&(a.checked=!0),r.append(a);let l=document.createElement("span");l.textContent=o.title,r.append(l),t.append(r);let c=document.createElement("div"),d=document.createElement("span");d.classList.add("dateInTask"),d.textContent=o.dueDate,c.append(d);let i=document.createElement("button");i.classList.add("infoTask"),i.textContent="Info",c.append(i);let s=document.createElement("button");s.classList.add("editTask"),s.textContent="Edit",c.append(s);let u=document.createElement("button");u.classList.add("deleteTask"),u.textContent="delete",c.append(u),t.append(c),n.append(t)}},l=(()=>{const t=document.querySelector(".addTaskButton"),n=document.querySelector("#modal-overlay"),o=document.querySelector(".cancel"),r=document.querySelector("#modal"),a=(document.querySelector(".formHeader"),document.querySelector(".formButtons"),()=>{n.style.display="flex"}),l=()=>{n.style.display="none"},c=()=>{document.querySelector("#modal-content")&&r.removeChild(document.querySelector("#modal-content"));const e=document.createElement("div");e.setAttribute("id","modal-content");const t=document.createElement("h2");t.classList.add("formHeader"),t.textContent="Add Task",e.append(t);const n=document.createElement("form"),o=document.createElement("div");o.classList.add("titleInput");const c=document.createElement("label");c.setAttribute("for","title"),c.textContent="Title";const d=document.createElement("input");d.type="text",d.setAttribute("id","title"),o.appendChild(c),o.appendChild(d),n.appendChild(o);const i=document.createElement("div");i.classList.add("descriptionInput");const s=document.createElement("label");s.setAttribute("for","description"),s.textContent="Description";const m=document.createElement("input");m.type="text",m.setAttribute("id","description"),i.appendChild(s),i.appendChild(m),n.appendChild(i);const p=document.createElement("div");p.classList.add("dateInput");const f=document.createElement("label");f.setAttribute("for","date"),f.textContent="Due Date";const y=document.createElement("input");y.type="date",y.setAttribute("id","date"),p.appendChild(f),p.appendChild(y),n.appendChild(p);const C=document.createElement("div");C.classList.add("priorityInput");const v=document.createElement("label");v.setAttribute("for","priority"),v.textContent="Priority";const h=document.createElement("select");h.setAttribute("name","priority"),h.setAttribute("id","priority");const g=document.createElement("option");g.textContent="Low",g.setAttribute("value","low");const k=document.createElement("option");k.textContent="Medium",k.setAttribute("value","medium");const E=document.createElement("option");E.textContent="High",E.setAttribute("value","high"),h.appendChild(g),h.appendChild(k),h.appendChild(E),C.appendChild(v),C.appendChild(h),n.appendChild(C);const S=document.createElement("div");S.classList.add("formButtons");const T=document.createElement("button");T.classList.add("submit"),T.textContent="Submit";const b=document.createElement("button");b.classList.add("cancel"),b.textContent="Cancel",S.appendChild(T),S.appendChild(b),e.appendChild(n),e.appendChild(S),r.appendChild(e),a(),b.addEventListener("click",(()=>l())),u()};return t.addEventListener("click",(()=>{c()})),o.addEventListener("click",(e=>{e.preventDefault(),l(),[...document.querySelectorAll("inputs")].forEach((e=>e.value=""))})),{infoModal:e=>{document.querySelector("#modal-content")&&r.removeChild(document.querySelector("#modal-content"));const t=document.createElement("div");t.setAttribute("id","modal-content");const n=document.createElement("h2");n.className="formHeader",n.textContent="Task Info",t.append(n);const o=document.createElement("div");o.classList.add("titleInput");const c=document.createElement("p");c.classList.add("infoInput"),c.textContent="Title",o.appendChild(c);const d=document.createElement("p");d.setAttribute("id","title"),d.textContent=e.title,o.append(d),t.append(o);const i=document.createElement("div");i.classList.add("descriptionInput");const s=document.createElement("p");s.classList.add("infoInput"),s.textContent="Description",i.appendChild(s);const u=document.createElement("p");u.setAttribute("id","description"),u.textContent=e.description,i.append(u),t.append(i);const m=document.createElement("div");m.classList.add("dateInput");const p=document.createElement("span");p.classList.add("infoInput"),p.textContent="Due Date",m.appendChild(p);const f=document.createElement("p");f.setAttribute("id","date"),f.textContent=e.dueDate,m.append(f),t.append(m);const y=document.createElement("div");y.classList.add("priorityInput");const C=document.createElement("p");C.classList.add("infoInput"),C.textContent="Priority",y.appendChild(C);const v=document.createElement("p");v.setAttribute("id","date"),v.textContent=e.priority,y.append(v),t.append(y);const h=document.createElement("div");h.classList.add("formButtons");const g=document.createElement("button");g.classList.add("cancel"),g.textContent="Close",h.append(g),t.appendChild(h),r.append(t),a(),g.addEventListener("click",(()=>l()))},editModal:t=>{c(),l();const n=document.querySelector(".formHeader"),o=document.querySelector("#title"),r=document.querySelector("#description"),d=document.querySelector("#date"),i=document.querySelector("#priority"),s=document.querySelector(".formButtons"),u=document.querySelector(".submit");s.removeChild(u);const m=document.createElement("button");m.classList.add("editSubmit"),m.textContent="Submit",s.prepend(m),o.value=t.title,r.value=t.description,d.value=t.dueDate,i.value=t.priority,n.textContent="Edit Task",a();let p=document.getElementById(t.title);m.addEventListener("click",(()=>{console.log("here"),e.editTask(t,o.value,r.value,d.value,i.value),p.id=t.title,p.nextElementSibling.textContent=t.title,l()}))},closeModal:l}})(),c=()=>{[...document.querySelectorAll(".infoTask")].forEach((t=>{t.addEventListener("click",(()=>{let n=t.parentElement.previousElementSibling.firstChild.id,o=e.returnTasks().filter((e=>e.title===n));l.infoModal(o[0])}))}))},d=()=>{[...document.querySelectorAll(".checkbox")].forEach((t=>{let n=e.returnTasks().filter((e=>e.title===t.id));t.checked?e.setChecked(n[0],!0):t.checked||e.setChecked(n[0],!1)}))},i=()=>{const t=[...document.querySelectorAll(".deleteTask")],n=document.querySelector("#listOfTasks"),o=document.querySelector(".numOfTasks");t.forEach((t=>{t.addEventListener("click",(()=>{let r=t.parentElement.previousElementSibling.firstChild.id,a=e.returnTasks().filter((e=>e.title===r));e.deleteTask(a[0]);let l=t.parentElement.parentElement;n.removeChild(l),o.textContent=`(${e.returnTasks().length})`}))}))},s=()=>{[...document.querySelectorAll(".editTask")].forEach((t=>{t.addEventListener("click",(()=>{let n=t.parentElement.previousElementSibling.firstChild.id,o=e.returnTasks().filter((e=>e.title===n));l.editModal(o[0])}))}))},u=()=>{const n=document.querySelector(".nameOfPage"),o=document.querySelector(".numOfTasks"),r=document.querySelector(".submit"),d=document.querySelector("#modal-overlay"),u=document.querySelector("#title"),m=document.querySelector("#description"),p=document.querySelector("#date"),f=document.querySelector("#priority"),y=document.querySelector(".titleInput"),C=document.createElement("p");r.addEventListener("click",(()=>{if(""===u.value)C.classList.add("requiredField"),y.appendChild(C),C.textContent="This field is required.";else{if("All Tasks"===n.textContent)e.createNewTask(u.value,m.value,p.value,f.value),a(e.returnTasks()),o.textContent=`(${e.returnTasks().length})`,u.value="",m.value="",p.value="",f.value="";else{console.log("here");let r=t.getProjects().indexOf(n.textContent);e.createNewTask(u.value,m.value,p.value,f.value,r);const l=e.returnTasks().filter((e=>e.projectIndex===r));a(l),o.textContent=`(${l.length})`}u.value="",m.value="",p.value="",f.value="",d.style.display="none",document.querySelector(".requiredField")&&y.removeChild(C),l.closeModal(),c(),i(),s()}}))};function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function p(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function f(e){p(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===m(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function y(e){p(1,arguments);var t=f(e);return t.setHours(0,0,0,0),t}Math.pow(10,8);var C=36e5;function v(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function h(e,t){var n;p(1,arguments);var o=v(null!==(n=null==t?void 0:t.additionalDigits)&&void 0!==n?n:2);if(2!==o&&1!==o&&0!==o)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var r,a=function(e){var t,n={},o=e.split(g.dateTimeDelimiter);if(o.length>2)return n;if(/:/.test(o[0])?t=o[0]:(n.date=o[0],t=o[1],g.timeZoneDelimiter.test(n.date)&&(n.date=e.split(g.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var r=g.timezone.exec(t);r?(n.time=t.replace(r[1],""),n.timezone=r[1]):n.time=t}return n}(e);if(a.date){var l=function(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),o=e.match(n);if(!o)return{year:NaN,restDateString:""};var r=o[1]?parseInt(o[1]):null,a=o[2]?parseInt(o[2]):null;return{year:null===a?r:100*a,restDateString:e.slice((o[1]||o[2]).length)}}(a.date,o);r=function(e,t){if(null===t)return new Date(NaN);var n=e.match(k);if(!n)return new Date(NaN);var o=!!n[4],r=T(n[1]),a=T(n[2])-1,l=T(n[3]),c=T(n[4]),d=T(n[5])-1;if(o)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,c,d)?function(e,t,n){var o=new Date(0);o.setUTCFullYear(e,0,4);var r=7*(t-1)+n+1-(o.getUTCDay()||7);return o.setUTCDate(o.getUTCDate()+r),o}(t,c,d):new Date(NaN);var i=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(x[t]||(q(e)?29:28))}(t,a,l)&&function(e,t){return t>=1&&t<=(q(e)?366:365)}(t,r)?(i.setUTCFullYear(t,a,Math.max(r,l)),i):new Date(NaN)}(l.restDateString,l.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);var c,d=r.getTime(),i=0;if(a.time&&(i=function(e){var t=e.match(E);if(!t)return NaN;var n=b(t[1]),o=b(t[2]),r=b(t[3]);return function(e,t,n){return 24===e?0===t&&0===n:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,o,r)?n*C+6e4*o+1e3*r:NaN}(a.time),isNaN(i)))return new Date(NaN);if(!a.timezone){var s=new Date(d+i),u=new Date(0);return u.setFullYear(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()),u.setHours(s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()),u}return c=function(e){if("Z"===e)return 0;var t=e.match(S);if(!t)return 0;var n="+"===t[1]?-1:1,o=parseInt(t[2]),r=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,r)?n*(o*C+6e4*r):NaN}(a.timezone),isNaN(c)?new Date(NaN):new Date(d+i+c)}var g={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},k=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,E=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,S=/^([+-])(\d{2})(?::?(\d{2}))?$/;function T(e){return e?parseInt(e):1}function b(e){return e&&parseFloat(e.replace(",","."))||0}var x=[31,null,31,30,31,30,31,31,30,31,30,31];function q(e){return e%400==0||e%4==0&&e%100!=0}var N={};function D(){return N}function L(e,t){var n,o,r,a,l,c,d,i;p(1,arguments);var s=D(),u=v(null!==(n=null!==(o=null!==(r=null!==(a=null==t?void 0:t.weekStartsOn)&&void 0!==a?a:null==t||null===(l=t.locale)||void 0===l||null===(c=l.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==r?r:s.weekStartsOn)&&void 0!==o?o:null===(d=s.locale)||void 0===d||null===(i=d.options)||void 0===i?void 0:i.weekStartsOn)&&void 0!==n?n:0);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=f(e),y=m.getDay(),C=(y<u?7:0)+y-u;return m.setDate(m.getDate()-C),m.setHours(0,0,0,0),m}const j=()=>{[...document.querySelector(".sidebar").children].forEach((e=>{e.classList.contains("projects")||(e.style.backgroundColor="#fff",e.addEventListener("click",(()=>{e.style.backgroundColor="#3C6E71"})))}))},w=document.querySelector(".all"),I=document.querySelector(".nameOfPage"),A=document.querySelector(".numOfTasks");t.initializeProjectsFromStorage(),e.initializeTasksFromStorage(),a(e.returnTasks()),r.displayProjects(),(()=>{r.newProjectItem(),o();const n=document.querySelector(".addTaskButton"),l=document.querySelector(".all"),u=document.querySelector(".today"),m=document.querySelector(".week"),f=document.querySelector(".completed"),C=document.querySelector(".nameOfPage"),v=document.querySelector(".numOfTasks");l.addEventListener("click",(()=>{n.style.display="block",C.textContent="All Tasks",v.textContent=`(${e.returnTasks().length})`,d(),a(e.returnTasks()),c(),i(),s(),o(),j()})),document.body.addEventListener("click",(function(r){if("projectItem"==r.target.className||"projectName"==r.target.className){C.textContent=r.target.textContent,n.style.display="block",d();let l=t.getProjects().indexOf(r.target.textContent);const u=e.returnTasks().filter((e=>e.projectIndex===l));v.textContent=`(${u.length})`,a(u),c(),i(),s(),o(),j()}})),f.addEventListener("click",(()=>{n.style.display="none",C.textContent="Completed Tasks",d();let t=e.returnTasks().filter((e=>!0===e.checked));a(t),[...document.querySelectorAll(".checkbox")].forEach((n=>{n.addEventListener("click",(()=>{d(),t=e.returnTasks().filter((e=>!0===e.checked)),a(t)}))})),v.textContent=`(${t.length})`,c(),i(),s(),o(),j()})),u.addEventListener("click",(()=>{n.style.display="none",C.textContent="Due Today",d();let t=e.returnTasks().filter((e=>!0===function(e){return p(1,arguments),function(e,t){p(2,arguments);var n=y(e),o=y(t);return n.getTime()===o.getTime()}(e,Date.now())}(h(e.dueDate))));v.textContent=`(${t.length})`,a(t),c(),i(),s(),o(),j()})),m.addEventListener("click",(()=>{n.style.display="none",C.textContent="Due this Week",d();let t=e.returnTasks().filter((e=>!0===function(e,t){return p(1,arguments),function(e,t,n){p(2,arguments);var o=L(e,n),r=L(t,n);return o.getTime()===r.getTime()}(e,Date.now(),t)}(h(e.dueDate))));v.textContent=`(${t.length})`,a(t),c(),i(),s(),o(),j()})),c(),i(),s(),o(),j()})(),w.style.backgroundColor="#3C6E71",I.textContent="All Tasks",A.textContent=`(${e.returnTasks().length})`})();