(()=>{"use strict";const e=(()=>{let e=new Array;const t=(e,t,o,r,l)=>{e.title=t,e.description=o,e.dueDate=r,e.priority=l,n()},n=()=>{null!=localStorage&&localStorage.removeItem("tasks"),localStorage.setItem("tasks",JSON.stringify(e))};return{createNewTask:(t,o,r,l,a)=>{const c={};c.title=t,c.description=o,c.dueDate=r,c.priority=l,c.checked=!1,c.projectIndex=a,e.push(c),n()},returnTasks:()=>e,deleteTask:t=>{let o=e.indexOf(t);e.splice(o,1),n()},editTask:t,isChecked:e=>!!e.checked,setChecked:(e,t)=>{e.checked=t},editTask:t,initializeTasksFromStorage:()=>{e=JSON.parse(localStorage.getItem("tasks"))}}})(),t=(()=>{let e=new Array;const t=()=>{null!=localStorage&&localStorage.removeItem("projects"),localStorage.setItem("projects",JSON.stringify(e)),console.log(localStorage.getItem("projects"))};return{createNewProject:n=>{e.push(n),t()},deleteProject:n=>{let o=e.indexOf(n);e.splice(o,1),t()},getProjects:()=>e,initializeProjectsFromStorage:()=>{e=JSON.parse(localStorage.getItem("projects"))}}})(),n=(()=>{const e=document.querySelector(".listOfProjects"),n=document.querySelector(".projectCount");return{newProjectItem:()=>{document.querySelector(".addProject").addEventListener("click",(()=>{const r=prompt("Enter the name of your Project:");t.createNewProject(r);const l=document.createElement("li");l.classList.add("projectItem");let a=document.createElement("span");a.classList.add("projectName"),a.textContent=r,l.appendChild(a);const c=document.createElement("button");c.classList.add("deleteProject"),c.textContent="X",l.append(c),e.appendChild(l),n.textContent=t.getProjects().length,o()}))},displayProjects:()=>{t.getProjects().forEach((o=>{const r=document.createElement("li");r.classList.add("projectItem");let l=document.createElement("span");l.classList.add("projectName"),l.textContent=o,r.appendChild(l);const a=document.createElement("button");a.classList.add("deleteProject"),a.textContent="X",r.append(a),e.appendChild(r),n.textContent=t.getProjects().length}))}}})(),o=()=>{const n=document.querySelector(".projectCount");[...document.querySelectorAll(".deleteProject")].forEach((o=>{console.log("yo"),o.addEventListener("click",(()=>{const r=document.querySelector("#listOfTasks"),l=document.querySelector(".listOfProjects");let a=o.previousElementSibling,c=t.getProjects().indexOf(a.textContent);t.deleteProject(a.textContent),n.textContent=t.getProjects().length,console.log(a.parentElement),console.log(l.children),l.removeChild(a.parentElement);const d=e.returnTasks().filter((e=>e.projectIndex===c));console.log(d),d.forEach((t=>{console.log("here"),r.childNodes.forEach((e=>{console.log(e),e.firstChild.lastChild.textContent===t.title&&r.removeChild(e)})),e.deleteTask(t)}))}))}))},r=n,l=t=>{(()=>{const e=document.querySelector("#taskList"),t=document.querySelector("#listOfTasks");t&&e.removeChild(t);const n=document.createElement("ul");n.id="listOfTasks",e.append(n)})();const n=document.querySelector("#listOfTasks");for(let o of t){let t=document.createElement("li");t.classList.add("tasks");let r=document.createElement("div"),l=document.createElement("input");l.type="checkbox",l.classList.add("checkbox"),l.setAttribute("id",o.title),console.log(e.isChecked(o)),e.isChecked(o)&&(l.checked=!0),r.append(l);let a=document.createElement("span");a.textContent=o.title,r.append(a),t.append(r);let c=document.createElement("div"),d=document.createElement("button");d.classList.add("infoTask"),d.textContent="Info",c.append(d);let i=document.createElement("button");i.classList.add("editTask"),i.textContent="Edit",c.append(i);let s=document.createElement("button");s.classList.add("deleteTask"),s.textContent="delete",c.append(s),t.append(c),n.append(t)}},a=(()=>{const t=document.querySelector(".addTaskButton"),n=document.querySelector("#modal-overlay"),o=document.querySelector(".cancel"),r=document.querySelector("#modal"),l=(document.querySelector(".formHeader"),document.querySelector(".formButtons"),()=>{n.style.display="flex"}),a=()=>{n.style.display="none"},c=()=>{document.querySelector("#modal-content")&&r.removeChild(document.querySelector("#modal-content"));const e=document.createElement("div");e.setAttribute("id","modal-content");const t=document.createElement("h2");t.classList.add("formHeader"),t.textContent="Add Task",e.append(t);const n=document.createElement("form"),o=document.createElement("div");o.classList.add("titleInput");const c=document.createElement("label");c.setAttribute("for","title"),c.textContent="Title";const d=document.createElement("input");d.type="text",d.setAttribute("id","title"),o.appendChild(c),o.appendChild(d),n.appendChild(o);const i=document.createElement("div");i.classList.add("descriptionInput");const s=document.createElement("label");s.setAttribute("for","description"),s.textContent="Description";const m=document.createElement("input");m.type="text",m.setAttribute("id","description"),i.appendChild(s),i.appendChild(m),n.appendChild(i);const p=document.createElement("div");p.classList.add("dateInput");const f=document.createElement("label");f.setAttribute("for","date"),f.textContent="Due Date";const v=document.createElement("input");v.type="date",v.setAttribute("id","date"),p.appendChild(f),p.appendChild(v),n.appendChild(p);const y=document.createElement("div");y.classList.add("priorityInput");const C=document.createElement("label");C.setAttribute("for","priority"),C.textContent="Priority";const h=document.createElement("select");h.setAttribute("name","priority"),h.setAttribute("id","priority");const E=document.createElement("option");E.textContent="Low",E.setAttribute("value","low");const g=document.createElement("option");g.textContent="Medium",g.setAttribute("value","medium");const S=document.createElement("option");S.textContent="High",S.setAttribute("value","high"),h.appendChild(E),h.appendChild(g),h.appendChild(S),y.appendChild(C),y.appendChild(h),n.appendChild(y);const k=document.createElement("div");k.classList.add("formButtons");const b=document.createElement("button");b.classList.add("submit"),b.textContent="Submit";const T=document.createElement("button");T.classList.add("cancel"),T.textContent="Cancel",k.appendChild(b),k.appendChild(T),e.appendChild(n),e.appendChild(k),r.appendChild(e),l(),T.addEventListener("click",(()=>a())),u()};return t.addEventListener("click",(()=>{c()})),o.addEventListener("click",(e=>{e.preventDefault(),a(),[...document.querySelectorAll("inputs")].forEach((e=>e.value=""))})),{infoModal:e=>{document.querySelector("#modal-content")&&r.removeChild(document.querySelector("#modal-content"));const t=document.createElement("div");t.setAttribute("id","modal-content");const n=document.createElement("h2");n.className="formHeader",n.textContent="Task Info",t.append(n);const o=document.createElement("div");o.classList.add("titleInput");const c=document.createElement("p");c.classList.add("infoInput"),c.textContent="Title",o.appendChild(c);const d=document.createElement("p");d.setAttribute("id","title"),d.textContent=e.title,o.append(d),t.append(o);const i=document.createElement("div");i.classList.add("descriptionInput");const s=document.createElement("p");s.classList.add("infoInput"),s.textContent="Description",i.appendChild(s);const u=document.createElement("p");u.setAttribute("id","description"),u.textContent=e.description,i.append(u),t.append(i);const m=document.createElement("div");m.classList.add("dateInput");const p=document.createElement("span");p.classList.add("infoInput"),p.textContent="Due Date",m.appendChild(p);const f=document.createElement("p");f.setAttribute("id","date"),f.textContent=e.dueDate,m.append(f),t.append(m);const v=document.createElement("div");v.classList.add("priorityInput");const y=document.createElement("p");y.classList.add("infoInput"),y.textContent="Priority",v.appendChild(y);const C=document.createElement("p");C.setAttribute("id","date"),C.textContent=e.priority,v.append(C),t.append(v);const h=document.createElement("div");h.classList.add("formButtons");const E=document.createElement("button");E.classList.add("cancel"),E.textContent="Close",h.append(E),t.appendChild(h),r.append(t),l(),E.addEventListener("click",(()=>a()))},editModal:t=>{c(),a();const n=document.querySelector(".formHeader"),o=document.querySelector("#title"),r=document.querySelector("#description"),d=document.querySelector("#date"),i=document.querySelector("#priority"),s=document.querySelector(".formButtons"),u=document.querySelector(".submit");s.removeChild(u);const m=document.createElement("button");m.classList.add("editSubmit"),m.textContent="Submit",s.prepend(m),o.value=t.title,r.value=t.description,d.value=t.dueDate,i.value=t.priority,n.textContent="Edit Task",l();let p=document.getElementById(t.title);m.addEventListener("click",(()=>{console.log("here"),e.editTask(t,o.value,r.value,d.value,i.value),p.id=t.title,p.nextElementSibling.textContent=t.title,a()}))},closeModal:a}})(),c=()=>{[...document.querySelectorAll(".infoTask")].forEach((t=>{t.addEventListener("click",(()=>{let n=t.parentElement.previousElementSibling.firstChild.id,o=e.returnTasks().filter((e=>e.title===n));a.infoModal(o[0])}))}))},d=()=>{[...document.querySelectorAll(".checkbox")].forEach((t=>{let n=e.returnTasks().filter((e=>e.title===t.id));t.checked?e.setChecked(n[0],!0):t.checked||e.setChecked(n[0],!1)}))},i=()=>{const t=[...document.querySelectorAll(".deleteTask")],n=document.querySelector("#listOfTasks");t.forEach((t=>{t.addEventListener("click",(()=>{let o=t.parentElement.previousElementSibling.firstChild.id,r=e.returnTasks().filter((e=>e.title===o));e.deleteTask(r[0]);let l=t.parentElement.parentElement;n.removeChild(l)}))}))},s=()=>{[...document.querySelectorAll(".editTask")].forEach((t=>{t.addEventListener("click",(()=>{let n=t.parentElement.previousElementSibling.firstChild.id,o=e.returnTasks().filter((e=>e.title===n));a.editModal(o[0])}))}))},u=()=>{const n=document.querySelector(".nameOfPage"),o=document.querySelector(".submit"),r=document.querySelector("#modal-overlay"),d=document.querySelector("#title"),u=document.querySelector("#description"),m=document.querySelector("#date"),p=document.querySelector("#priority"),f=document.querySelector(".titleInput"),v=document.createElement("p");o.addEventListener("click",(()=>{if(""===d.value)v.classList.add("requiredField"),f.appendChild(v),v.textContent="This field is required.";else{if(console.log(m.value),"All"===n.textContent)e.createNewTask(d.value,u.value,m.value,p.value),l(e.returnTasks()),d.value="",u.value="",m.value="",p.value="";else{let o=t.getProjects().indexOf(n.textContent);e.createNewTask(d.value,u.value,m.value,p.value,o);const r=e.returnTasks().filter((e=>e.projectIndex===o));l(r)}d.value="",u.value="",m.value="",p.value="",r.style.display="none",document.querySelector(".requiredField")&&f.removeChild(v),a.closeModal(),c(),i(),s()}}))};function m(e){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},m(e)}function p(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function f(e){p(1,arguments);var t=Object.prototype.toString.call(e);return e instanceof Date||"object"===m(e)&&"[object Date]"===t?new Date(e.getTime()):"number"==typeof e||"[object Number]"===t?new Date(e):("string"!=typeof e&&"[object String]"!==t||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn((new Error).stack)),new Date(NaN))}function v(e){p(1,arguments);var t=f(e);return t.setHours(0,0,0,0),t}Math.pow(10,8);var y=36e5;function C(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function h(e,t){var n;p(1,arguments);var o=C(null!==(n=null==t?void 0:t.additionalDigits)&&void 0!==n?n:2);if(2!==o&&1!==o&&0!==o)throw new RangeError("additionalDigits must be 0, 1 or 2");if("string"!=typeof e&&"[object String]"!==Object.prototype.toString.call(e))return new Date(NaN);var r,l=function(e){var t,n={},o=e.split(E.dateTimeDelimiter);if(o.length>2)return n;if(/:/.test(o[0])?t=o[0]:(n.date=o[0],t=o[1],E.timeZoneDelimiter.test(n.date)&&(n.date=e.split(E.timeZoneDelimiter)[0],t=e.substr(n.date.length,e.length))),t){var r=E.timezone.exec(t);r?(n.time=t.replace(r[1],""),n.timezone=r[1]):n.time=t}return n}(e);if(l.date){var a=function(e,t){var n=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+t)+"})|(\\d{2}|[+-]\\d{"+(2+t)+"})$)"),o=e.match(n);if(!o)return{year:NaN,restDateString:""};var r=o[1]?parseInt(o[1]):null,l=o[2]?parseInt(o[2]):null;return{year:null===l?r:100*l,restDateString:e.slice((o[1]||o[2]).length)}}(l.date,o);r=function(e,t){if(null===t)return new Date(NaN);var n=e.match(g);if(!n)return new Date(NaN);var o=!!n[4],r=b(n[1]),l=b(n[2])-1,a=b(n[3]),c=b(n[4]),d=b(n[5])-1;if(o)return function(e,t,n){return t>=1&&t<=53&&n>=0&&n<=6}(0,c,d)?function(e,t,n){var o=new Date(0);o.setUTCFullYear(e,0,4);var r=7*(t-1)+n+1-(o.getUTCDay()||7);return o.setUTCDate(o.getUTCDate()+r),o}(t,c,d):new Date(NaN);var i=new Date(0);return function(e,t,n){return t>=0&&t<=11&&n>=1&&n<=(x[t]||(N(e)?29:28))}(t,l,a)&&function(e,t){return t>=1&&t<=(N(e)?366:365)}(t,r)?(i.setUTCFullYear(t,l,Math.max(r,a)),i):new Date(NaN)}(a.restDateString,a.year)}if(!r||isNaN(r.getTime()))return new Date(NaN);var c,d=r.getTime(),i=0;if(l.time&&(i=function(e){var t=e.match(S);if(!t)return NaN;var n=T(t[1]),o=T(t[2]),r=T(t[3]);return function(e,t,n){return 24===e?0===t&&0===n:n>=0&&n<60&&t>=0&&t<60&&e>=0&&e<25}(n,o,r)?n*y+6e4*o+1e3*r:NaN}(l.time),isNaN(i)))return new Date(NaN);if(!l.timezone){var s=new Date(d+i),u=new Date(0);return u.setFullYear(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate()),u.setHours(s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),s.getUTCMilliseconds()),u}return c=function(e){if("Z"===e)return 0;var t=e.match(k);if(!t)return 0;var n="+"===t[1]?-1:1,o=parseInt(t[2]),r=t[3]&&parseInt(t[3])||0;return function(e,t){return t>=0&&t<=59}(0,r)?n*(o*y+6e4*r):NaN}(l.timezone),isNaN(c)?new Date(NaN):new Date(d+i+c)}var E={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},g=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,S=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,k=/^([+-])(\d{2})(?::?(\d{2}))?$/;function b(e){return e?parseInt(e):1}function T(e){return e&&parseFloat(e.replace(",","."))||0}var x=[31,null,31,30,31,30,31,31,30,31,30,31];function N(e){return e%400==0||e%4==0&&e%100!=0}var q={};function D(){return q}function L(e,t){var n,o,r,l,a,c,d,i;p(1,arguments);var s=D(),u=C(null!==(n=null!==(o=null!==(r=null!==(l=null==t?void 0:t.weekStartsOn)&&void 0!==l?l:null==t||null===(a=t.locale)||void 0===a||null===(c=a.options)||void 0===c?void 0:c.weekStartsOn)&&void 0!==r?r:s.weekStartsOn)&&void 0!==o?o:null===(d=s.locale)||void 0===d||null===(i=d.options)||void 0===i?void 0:i.weekStartsOn)&&void 0!==n?n:0);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var m=f(e),v=m.getDay(),y=(v<u?7:0)+v-u;return m.setDate(m.getDate()-y),m.setHours(0,0,0,0),m}t.initializeProjectsFromStorage(),e.initializeTasksFromStorage(),l(e.returnTasks()),r.displayProjects(),(()=>{r.newProjectItem(),o();const n=document.querySelector(".addTaskButton"),a=document.querySelector(".all"),u=document.querySelector(".today"),m=document.querySelector(".week"),f=document.querySelector(".completed"),y=document.querySelector(".nameOfPage");a.addEventListener("click",(()=>{n.style.display="block",y.textContent="All",d(),l(e.returnTasks()),c(),i(),s(),o()})),document.body.addEventListener("click",(function(r){if("projectItem"==r.target.className||"projectName"==r.target.className){n.style.display="block",y.textContent=r.target.textContent,d();let a=t.getProjects().indexOf(r.target.textContent);const u=e.returnTasks().filter((e=>e.projectIndex===a));l(u),c(),i(),s(),o()}})),f.addEventListener("click",(()=>{n.style.display="none",y.textContent="Completed Tasks",d();let t=e.returnTasks().filter((e=>!0===e.checked));l(t),[...document.querySelectorAll(".checkbox")].forEach((n=>{n.addEventListener("click",(()=>{d(),t=e.returnTasks().filter((e=>!0===e.checked)),l(t)}))})),c(),i(),s(),o()})),u.addEventListener("click",(()=>{n.style.display="none",y.textContent="Due Today",d();let t=e.returnTasks().filter((e=>!0===function(e){return p(1,arguments),function(e,t){p(2,arguments);var n=v(e),o=v(t);return n.getTime()===o.getTime()}(e,Date.now())}(h(e.dueDate))));l(t),c(),i(),s(),o()})),m.addEventListener("click",(()=>{n.style.display="none",y.textContent="Due this Week",d();let t=e.returnTasks().filter((e=>!0===function(e,t){return p(1,arguments),function(e,t,n){p(2,arguments);var o=L(e,n),r=L(t,n);return o.getTime()===r.getTime()}(e,Date.now(),t)}(h(e.dueDate))));l(t),c(),i(),s(),o()})),c(),i(),s(),o()})()})();