(()=>{"use strict";const e=(()=>{let e=new Array;const t=(e,t,o,c,l)=>{e.title=t,e.description=o,e.dueDate=c,e.priority=l,n()},n=()=>{null!=localStorage&&localStorage.removeItem("tasks"),localStorage.setItem("tasks",JSON.stringify(e))};return{createNewTask:(t,o,c,l,d)=>{const r={};r.title=t,r.description=o,r.dueDate=c,r.priority=l,r.checked=!1,r.projectIndex=d,e.push(r),n()},returnTasks:()=>e,deleteTask:t=>{let o=e.indexOf(t);e.splice(o,1),n()},editTask:t,isChecked:e=>!!e.checked,setChecked:(e,t)=>{e.checked=t},editTask:t,initializeTasksFromStorage:()=>{e=JSON.parse(localStorage.getItem("tasks"))}}})(),t=(()=>{let e=new Array;const t=()=>{null!=localStorage&&localStorage.removeItem("projects"),localStorage.setItem("projects",JSON.stringify(e)),console.log(localStorage.getItem("projects"))};return{createNewProject:n=>{e.push(n),t()},deleteProject:n=>{let o=e.indexOf(n);e.splice(o,1),t()},getProjects:()=>e,initializeProjectsFromStorage:()=>{e=JSON.parse(localStorage.getItem("projects"))}}})(),n=(()=>{const e=document.querySelector(".listOfProjects"),n=document.querySelector(".projectCount");return{newProjectItem:()=>{document.querySelector(".addProject").addEventListener("click",(()=>{const c=prompt("Enter the name of your Project:");t.createNewProject(c);const l=document.createElement("li");l.classList.add("projectItem");let d=document.createElement("span");d.classList.add("projectName"),d.textContent=c,l.appendChild(d);const r=document.createElement("button");r.classList.add("deleteProject"),r.textContent="X",l.append(r),e.appendChild(l),n.textContent=t.getProjects().length,o()}))},displayProjects:()=>{t.getProjects().forEach((o=>{const c=document.createElement("li");c.classList.add("projectItem");let l=document.createElement("span");l.classList.add("projectName"),l.textContent=o,c.appendChild(l);const d=document.createElement("button");d.classList.add("deleteProject"),d.textContent="X",c.append(d),e.appendChild(c),n.textContent=t.getProjects().length}))}}})(),o=()=>{const n=document.querySelector(".projectCount");[...document.querySelectorAll(".deleteProject")].forEach((o=>{console.log("yo"),o.addEventListener("click",(()=>{const c=document.querySelector("#listOfTasks"),l=document.querySelector(".listOfProjects");let d=o.previousElementSibling,r=t.getProjects().indexOf(d.textContent);t.deleteProject(d.textContent),n.textContent=t.getProjects().length,console.log(d.parentElement),console.log(l.children),l.removeChild(d.parentElement);const a=e.returnTasks().filter((e=>e.projectIndex===r));console.log(a),a.forEach((t=>{console.log("here"),c.childNodes.forEach((e=>{console.log(e),e.firstChild.lastChild.textContent===t.title&&c.removeChild(e)})),e.deleteTask(t)}))}))}))},c=n,l=t=>{(()=>{const e=document.querySelector("#taskList"),t=document.querySelector("#listOfTasks");t&&e.removeChild(t);const n=document.createElement("ul");n.id="listOfTasks",e.append(n)})();const n=document.querySelector("#listOfTasks");for(let o of t){let t=document.createElement("li");t.classList.add("tasks");let c=document.createElement("div"),l=document.createElement("input");l.type="checkbox",l.classList.add("checkbox"),l.setAttribute("id",o.title),console.log(e.isChecked(o)),e.isChecked(o)&&(l.checked=!0),c.append(l);let d=document.createElement("span");d.textContent=o.title,c.append(d),t.append(c);let r=document.createElement("div"),a=document.createElement("button");a.classList.add("infoTask"),a.textContent="Info",r.append(a);let s=document.createElement("button");s.classList.add("editTask"),s.textContent="Edit",r.append(s);let i=document.createElement("button");i.classList.add("deleteTask"),i.textContent="delete",r.append(i),t.append(r),n.append(t)}},d=(()=>{const t=document.querySelector(".addTaskButton"),n=document.querySelector("#modal-overlay"),o=document.querySelector(".cancel"),c=document.querySelector("#modal"),l=(document.querySelector(".formHeader"),document.querySelector(".formButtons"),()=>{n.style.display="flex"}),d=()=>{n.style.display="none"},r=()=>{document.querySelector("#modal-content")&&c.removeChild(document.querySelector("#modal-content"));const e=document.createElement("div");e.setAttribute("id","modal-content");const t=document.createElement("h2");t.classList.add("formHeader"),t.textContent="Add Task",e.append(t);const n=document.createElement("form"),o=document.createElement("div");o.classList.add("titleInput");const r=document.createElement("label");r.setAttribute("for","title"),r.textContent="Title";const a=document.createElement("input");a.type="text",a.setAttribute("id","title"),o.appendChild(r),o.appendChild(a),n.appendChild(o);const s=document.createElement("div");s.classList.add("descriptionInput");const i=document.createElement("label");i.setAttribute("for","description"),i.textContent="Description";const m=document.createElement("input");m.type="text",m.setAttribute("id","description"),s.appendChild(i),s.appendChild(m),n.appendChild(s);const p=document.createElement("div");p.classList.add("dateInput");const C=document.createElement("label");C.setAttribute("for","date"),C.textContent="Due Date";const E=document.createElement("input");E.type="date",E.setAttribute("id","date"),p.appendChild(C),p.appendChild(E),n.appendChild(p);const y=document.createElement("div");y.classList.add("priorityInput");const h=document.createElement("label");h.setAttribute("for","priority"),h.textContent="Priority";const k=document.createElement("select");k.setAttribute("name","priority"),k.setAttribute("id","priority");const v=document.createElement("option");v.textContent="Low",v.setAttribute("value","low");const S=document.createElement("option");S.textContent="Medium",S.setAttribute("value","medium");const f=document.createElement("option");f.textContent="High",f.setAttribute("value","high"),k.appendChild(v),k.appendChild(S),k.appendChild(f),y.appendChild(h),y.appendChild(k),n.appendChild(y);const x=document.createElement("div");x.classList.add("formButtons");const g=document.createElement("button");g.classList.add("submit"),g.textContent="Submit";const q=document.createElement("button");q.classList.add("cancel"),q.textContent="Cancel",x.appendChild(g),x.appendChild(q),e.appendChild(n),e.appendChild(x),c.appendChild(e),l(),q.addEventListener("click",(()=>d())),u()};return t.addEventListener("click",(()=>{r()})),o.addEventListener("click",(e=>{e.preventDefault(),d(),[...document.querySelectorAll("inputs")].forEach((e=>e.value=""))})),{infoModal:e=>{document.querySelector("#modal-content")&&c.removeChild(document.querySelector("#modal-content"));const t=document.createElement("div");t.setAttribute("id","modal-content");const n=document.createElement("h2");n.className="formHeader",n.textContent="Task Info",t.append(n);const o=document.createElement("div");o.classList.add("titleInput");const r=document.createElement("p");r.classList.add("infoInput"),r.textContent="Title",o.appendChild(r);const a=document.createElement("p");a.setAttribute("id","title"),a.textContent=e.title,o.append(a),t.append(o);const s=document.createElement("div");s.classList.add("descriptionInput");const i=document.createElement("p");i.classList.add("infoInput"),i.textContent="Description",s.appendChild(i);const u=document.createElement("p");u.setAttribute("id","description"),u.textContent=e.description,s.append(u),t.append(s);const m=document.createElement("div");m.classList.add("dateInput");const p=document.createElement("span");p.classList.add("infoInput"),p.textContent="Due Date",m.appendChild(p);const C=document.createElement("p");C.setAttribute("id","date"),C.textContent=e.dueDate,m.append(C),t.append(m);const E=document.createElement("div");E.classList.add("priorityInput");const y=document.createElement("p");y.classList.add("infoInput"),y.textContent="Priority",E.appendChild(y);const h=document.createElement("p");h.setAttribute("id","date"),h.textContent=e.priority,E.append(h),t.append(E);const k=document.createElement("div");k.classList.add("formButtons");const v=document.createElement("button");v.classList.add("cancel"),v.textContent="Close",k.append(v),t.appendChild(k),c.append(t),l(),v.addEventListener("click",(()=>d()))},editModal:t=>{r(),d();const n=document.querySelector(".formHeader"),o=document.querySelector("#title"),c=document.querySelector("#description"),a=document.querySelector("#date"),s=document.querySelector("#priority"),i=document.querySelector(".formButtons"),u=document.querySelector(".submit");i.removeChild(u);const m=document.createElement("button");m.classList.add("editSubmit"),m.textContent="Submit",i.prepend(m),o.value=t.title,c.value=t.description,a.value=t.dueDate,s.value=t.priority,n.textContent="Edit Task",l();let p=document.getElementById(t.title);m.addEventListener("click",(()=>{console.log("here"),e.editTask(t,o.value,c.value,a.value,s.value),p.id=t.title,p.nextElementSibling.textContent=t.title,d()}))},closeModal:d}})(),r=()=>{[...document.querySelectorAll(".infoTask")].forEach((t=>{t.addEventListener("click",(()=>{let n=t.parentElement.previousElementSibling.firstChild.id,o=e.returnTasks().filter((e=>e.title===n));d.infoModal(o[0])}))}))},a=()=>{[...document.querySelectorAll(".checkbox")].forEach((t=>{let n=e.returnTasks().filter((e=>e.title===t.id));t.checked?e.setChecked(n[0],!0):t.checked||e.setChecked(n[0],!1)}))},s=()=>{const t=[...document.querySelectorAll(".deleteTask")],n=document.querySelector("#listOfTasks");t.forEach((t=>{t.addEventListener("click",(()=>{let o=t.parentElement.previousElementSibling.firstChild.id,c=e.returnTasks().filter((e=>e.title===o));e.deleteTask(c[0]);let l=t.parentElement.parentElement;n.removeChild(l)}))}))},i=()=>{[...document.querySelectorAll(".editTask")].forEach((t=>{t.addEventListener("click",(()=>{let n=t.parentElement.previousElementSibling.firstChild.id,o=e.returnTasks().filter((e=>e.title===n));d.editModal(o[0])}))}))},u=()=>{const n=document.querySelector(".nameOfPage"),o=document.querySelector(".submit"),c=document.querySelector("#modal-overlay"),a=document.querySelector("#title"),u=document.querySelector("#description"),m=document.querySelector("#date"),p=document.querySelector("#priority"),C=document.querySelector(".titleInput"),E=document.createElement("p");o.addEventListener("click",(()=>{if(""===a.value)E.classList.add("requiredField"),C.appendChild(E),E.textContent="This field is required.";else{if("All"===n.textContent)e.createNewTask(a.value,u.value,m.value,p.value),l(e.returnTasks()),a.value="",u.value="",m.value="",p.value="";else{let o=t.getProjects().indexOf(n.textContent);e.createNewTask(a.value,u.value,m.value,p.value,o);const c=e.returnTasks().filter((e=>e.projectIndex===o));l(c)}a.value="",u.value="",m.value="",p.value="",c.style.display="none",document.querySelector(".requiredField")&&C.removeChild(E),d.closeModal(),r(),s(),i()}}))};t.initializeProjectsFromStorage(),e.initializeTasksFromStorage(),l(e.returnTasks()),c.displayProjects(),(()=>{c.newProjectItem(),o();const n=document.querySelector(".addTaskButton"),d=document.querySelector(".all"),u=(document.querySelector(".today"),document.querySelector(".week"),document.querySelector(".completed")),m=document.querySelector(".nameOfPage");d.addEventListener("click",(()=>{n.style.display="block",m.textContent="All",a(),l(e.returnTasks()),r(),s(),i(),o()})),document.body.addEventListener("click",(function(c){if("projectItem"==c.target.className||"projectName"==c.target.className){n.style.display="block",m.textContent=c.target.textContent,a();let d=t.getProjects().indexOf(c.target.textContent);const u=e.returnTasks().filter((e=>e.projectIndex===d));l(u),r(),s(),i(),o()}})),u.addEventListener("click",(()=>{n.style.display="none",m.textContent="Completed Tasks",a();let t=e.returnTasks().filter((e=>!0===e.checked));l(t),[...document.querySelectorAll(".checkbox")].forEach((n=>{n.addEventListener("click",(()=>{a(),t=e.returnTasks().filter((e=>!0===e.checked)),l(t)}))})),r(),s(),i(),o()})),r(),s(),i(),o()})()})();