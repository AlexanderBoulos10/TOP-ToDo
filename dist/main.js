(()=>{"use strict";const e=(()=>{let e=new Array;const t=(e,t,o,c,d)=>{e.title=t,e.description=o,e.dueDate=c,e.priority=d,n()},n=()=>{null!=localStorage&&localStorage.removeItem("tasks"),localStorage.setItem("tasks",JSON.stringify(e))};return{createNewTask:(t,o,c,d,l)=>{const r={};r.title=t,r.description=o,r.dueDate=c,r.priority=d,r.checked=!1,r.projectIndex=l,e.push(r),n()},returnTasks:()=>e,deleteTask:t=>{let o=e.indexOf(t);e.splice(o,1),n()},editTask:t,isChecked:e=>!!e.checked,setChecked:(e,t)=>{e.checked=t},editTask:t,initializeTasksFromStorage:()=>{e=JSON.parse(localStorage.getItem("tasks"))}}})(),t=(()=>{let e=new Array;const t=()=>{null!=localStorage&&localStorage.removeItem("projects"),localStorage.setItem("projects",JSON.stringify(e)),console.log(localStorage.getItem("projects"))};return{createNewProject:n=>{e.push(n),t()},deleteProject:n=>{let o=e.indexOf(n);e.splice(o,1),t()},getProjects:()=>e,initializeProjectsFromStorage:()=>{e=JSON.parse(localStorage.getItem("projects"))}}})(),n=t,o=(()=>{const e=document.querySelector(".listOfProjects");return{newProjectItem:()=>{document.querySelector(".addProject").addEventListener("click",(()=>{const t=prompt("Enter the name of your Project:");n.createNewProject(t);const o=document.createElement("li");o.classList.add("projectItem");let c=document.createElement("span");c.classList.add("projectName"),c.textContent=t,o.appendChild(c);const d=document.createElement("button");d.classList.add("deleteProject"),d.textContent="X",o.append(d),e.appendChild(o)}))},displayProjects:()=>{n.getProjects().forEach((t=>{const n=document.createElement("li");n.classList.add("projectItem");let o=document.createElement("span");o.classList.add("projectName"),o.textContent=t,n.appendChild(o);const c=document.createElement("button");c.classList.add("deleteProject"),c.textContent="X",n.append(c),e.appendChild(n)}))}}})(),c=()=>{const t=[...document.querySelectorAll(".deleteProject")],o=document.querySelector("#listOfTasks");t.forEach((t=>{const c=document.querySelector(".listOfProjects");console.log(o),t.addEventListener("click",(()=>{let d=t.previousElementSibling,l=n.getProjects().indexOf(d.textContent);n.deleteProject(d.textContent),c.removeChild(d.parentElement);const r=e.returnTasks().filter((e=>e.projectIndex===l));console.log(r),r.forEach((t=>{o.childNodes.forEach((e=>{console.log(e),e.firstChild.lastChild.textContent===t.title&&o.removeChild(e)})),e.deleteTask(t)}))}))}))},d=o,l=t=>{(()=>{const e=document.querySelector("#taskList"),t=document.querySelector("#listOfTasks");t&&e.removeChild(t);const n=document.createElement("ul");n.id="listOfTasks",e.append(n)})();const n=document.querySelector("#listOfTasks");for(let o of t){let t=document.createElement("li");t.classList.add("tasks");let c=document.createElement("div"),d=document.createElement("input");d.type="checkbox",d.classList.add("checkbox"),d.setAttribute("id",o.title),console.log(e.isChecked(o)),e.isChecked(o)&&(d.checked=!0),c.append(d);let l=document.createElement("span");l.textContent=o.title,c.append(l),t.append(c);let r=document.createElement("div"),a=document.createElement("button");a.classList.add("infoTask"),a.textContent="Info",r.append(a);let s=document.createElement("button");s.classList.add("editTask"),s.textContent="Edit",r.append(s);let i=document.createElement("button");i.classList.add("deleteTask"),i.textContent="delete",r.append(i),t.append(r),n.append(t)}},r=(()=>{const t=document.querySelector(".addTaskButton"),n=document.querySelector("#modal-overlay"),o=document.querySelector(".cancel"),c=document.querySelector("#modal"),d=(document.querySelector(".formHeader"),document.querySelector(".formButtons"),()=>{n.style.display="flex"}),l=()=>{n.style.display="none"},r=()=>{document.querySelector("#modal-content")&&c.removeChild(document.querySelector("#modal-content"));const e=document.createElement("div");e.setAttribute("id","modal-content");const t=document.createElement("h2");t.classList.add("formHeader"),t.textContent="Add Task",e.append(t);const n=document.createElement("form"),o=document.createElement("div");o.classList.add("titleInput");const r=document.createElement("label");r.setAttribute("for","title"),r.textContent="Title";const a=document.createElement("input");a.type="text",a.setAttribute("id","title"),o.appendChild(r),o.appendChild(a),n.appendChild(o);const s=document.createElement("div");s.classList.add("descriptionInput");const i=document.createElement("label");i.setAttribute("for","description"),i.textContent="Description";const u=document.createElement("input");u.type="text",u.setAttribute("id","description"),s.appendChild(i),s.appendChild(u),n.appendChild(s);const p=document.createElement("div");p.classList.add("dateInput");const C=document.createElement("label");C.setAttribute("for","date"),C.textContent="Due Date";const E=document.createElement("input");E.type="date",E.setAttribute("id","date"),p.appendChild(C),p.appendChild(E),n.appendChild(p);const y=document.createElement("div");y.classList.add("priorityInput");const h=document.createElement("label");h.setAttribute("for","priority"),h.textContent="Priority";const v=document.createElement("select");v.setAttribute("name","priority"),v.setAttribute("id","priority");const k=document.createElement("option");k.textContent="Low",k.setAttribute("value","low");const S=document.createElement("option");S.textContent="Medium",S.setAttribute("value","medium");const f=document.createElement("option");f.textContent="High",f.setAttribute("value","high"),v.appendChild(k),v.appendChild(S),v.appendChild(f),y.appendChild(h),y.appendChild(v),n.appendChild(y);const x=document.createElement("div");x.classList.add("formButtons");const q=document.createElement("button");q.classList.add("submit"),q.textContent="Submit";const b=document.createElement("button");b.classList.add("cancel"),b.textContent="Cancel",x.appendChild(q),x.appendChild(b),e.appendChild(n),e.appendChild(x),c.appendChild(e),d(),b.addEventListener("click",(()=>l())),m()};return t.addEventListener("click",(()=>{r()})),o.addEventListener("click",(e=>{e.preventDefault(),l(),[...document.querySelectorAll("inputs")].forEach((e=>e.value=""))})),{infoModal:e=>{document.querySelector("#modal-content")&&c.removeChild(document.querySelector("#modal-content"));const t=document.createElement("div");t.setAttribute("id","modal-content");const n=document.createElement("h2");n.className="formHeader",n.textContent="Task Info",t.append(n);const o=document.createElement("div");o.classList.add("titleInput");const r=document.createElement("p");r.classList.add("infoInput"),r.textContent="Title",o.appendChild(r);const a=document.createElement("p");a.setAttribute("id","title"),a.textContent=e.title,o.append(a),t.append(o);const s=document.createElement("div");s.classList.add("descriptionInput");const i=document.createElement("p");i.classList.add("infoInput"),i.textContent="Description",s.appendChild(i);const u=document.createElement("p");u.setAttribute("id","description"),u.textContent=e.description,s.append(u),t.append(s);const m=document.createElement("div");m.classList.add("dateInput");const p=document.createElement("span");p.classList.add("infoInput"),p.textContent="Due Date",m.appendChild(p);const C=document.createElement("p");C.setAttribute("id","date"),C.textContent=e.dueDate,m.append(C),t.append(m);const E=document.createElement("div");E.classList.add("priorityInput");const y=document.createElement("p");y.classList.add("infoInput"),y.textContent="Priority",E.appendChild(y);const h=document.createElement("p");h.setAttribute("id","date"),h.textContent=e.priority,E.append(h),t.append(E);const v=document.createElement("div");v.classList.add("formButtons");const k=document.createElement("button");k.classList.add("cancel"),k.textContent="Close",v.append(k),t.appendChild(v),c.append(t),d(),k.addEventListener("click",(()=>l()))},editModal:t=>{r(),l();const n=document.querySelector(".formHeader"),o=document.querySelector("#title"),c=document.querySelector("#description"),a=document.querySelector("#date"),s=document.querySelector("#priority"),i=document.querySelector(".formButtons"),u=document.querySelector(".submit");i.removeChild(u);const m=document.createElement("button");m.classList.add("editSubmit"),m.textContent="Submit",i.prepend(m),o.value=t.title,c.value=t.description,a.value=t.dueDate,s.value=t.priority,n.textContent="Edit Task",d();let p=document.getElementById(t.title);m.addEventListener("click",(()=>{console.log("here"),e.editTask(t,o.value,c.value,a.value,s.value),p.id=t.title,p.nextElementSibling.textContent=t.title,l()}))},closeModal:l}})(),a=()=>{[...document.querySelectorAll(".infoTask")].forEach((t=>{t.addEventListener("click",(()=>{let n=t.parentElement.previousElementSibling.firstChild.id,o=e.returnTasks().filter((e=>e.title===n));r.infoModal(o[0])}))}))},s=()=>{[...document.querySelectorAll(".checkbox")].forEach((t=>{let n=e.returnTasks().filter((e=>e.title===t.id));t.checked?e.setChecked(n[0],!0):t.checked||e.setChecked(n[0],!1)}))},i=()=>{const t=[...document.querySelectorAll(".deleteTask")],n=document.querySelector("#listOfTasks");t.forEach((t=>{t.addEventListener("click",(()=>{let o=t.parentElement.previousElementSibling.firstChild.id,c=e.returnTasks().filter((e=>e.title===o));e.deleteTask(c[0]);let d=t.parentElement.parentElement;n.removeChild(d)}))}))},u=()=>{[...document.querySelectorAll(".editTask")].forEach((t=>{t.addEventListener("click",(()=>{let n=t.parentElement.previousElementSibling.firstChild.id,o=e.returnTasks().filter((e=>e.title===n));r.editModal(o[0])}))}))},m=()=>{const t=document.querySelector(".nameOfPage"),o=document.querySelector(".submit"),c=document.querySelector("#modal-overlay"),d=document.querySelector("#title"),s=document.querySelector("#description"),m=document.querySelector("#date"),p=document.querySelector("#priority"),C=document.querySelector(".titleInput"),E=document.createElement("p");o.addEventListener("click",(()=>{if(""===d.value)E.classList.add("requiredField"),C.appendChild(E),E.textContent="This field is required.";else{if("All"===t.textContent)e.createNewTask(d.value,s.value,m.value,p.value),l(e.returnTasks()),d.value="",s.value="",m.value="",p.value="";else{let o=n.getProjects().indexOf(t.textContent);e.createNewTask(d.value,s.value,m.value,p.value,o);const c=e.returnTasks().filter((e=>e.projectIndex===o));l(c)}d.value="",s.value="",m.value="",p.value="",c.style.display="none",document.querySelector(".requiredField")&&C.removeChild(E),r.closeModal(),a(),i(),u()}}))};n.initializeProjectsFromStorage(),e.initializeTasksFromStorage(),l(e.returnTasks()),d.displayProjects(),(()=>{d.newProjectItem();const t=document.querySelector(".all"),o=(document.querySelector(".today"),document.querySelector(".week"),document.querySelector(".completed"),document.querySelector(".nameOfPage"));t.addEventListener("click",(()=>{o.textContent="All",s(),l(e.returnTasks()),a(),i(),u(),c()})),document.body.addEventListener("click",(function(t){if("projectItem"==t.target.className||"projectName"==t.target.className){o.textContent=t.target.textContent,s();let d=n.getProjects().indexOf(t.target.textContent);const r=e.returnTasks().filter((e=>e.projectIndex===d));l(r),a(),i(),u(),c()}})),a(),i(),u(),c()})()})();