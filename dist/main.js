(()=>{"use strict";const e=(()=>{let e=new Array;const t=(t,o,c,d,l)=>{t.title=o,t.description=c,t.dueDate=d,t.priority=l,console.log(e),n()},n=()=>{null!=localStorage&&localStorage.removeItem("tasks"),console.log(JSON.stringify(e)),localStorage.setItem("tasks",JSON.stringify(e))};return{createNewTask:(t,o,c,d,l)=>{const r={};r.title=t,r.description=o,r.dueDate=c,r.priority=d,r.checked=!1,r.projectIndex=l,e.push(r),n()},returnTasks:()=>e,deleteTask:t=>{let o=e.indexOf(t);e.splice(o,1),n()},editTask:t,isChecked:e=>!!e.checked,setChecked:(e,t)=>{e.checked=t},editTask:t,initializeTasksFromStorage:()=>{e=JSON.parse(localStorage.getItem("tasks"))}}})(),t=(()=>{let e=new Array;const t=()=>{null!=localStorage&&localStorage.removeItem("projects"),localStorage.setItem("projects",JSON.stringify(e)),console.log(localStorage.getItem("projects"))};return{createNewProject:n=>{e.push(n),t()},deleteProject:n=>{e.splice(n,1),t()},getProjects:()=>e,initializeProjectsFromStorage:()=>{e=JSON.parse(localStorage.getItem("projects"))}}})(),n=(()=>{const e=document.querySelector(".listOfProjects");return{newProjectItem:()=>{document.querySelector(".addProject").addEventListener("click",(()=>{const n=prompt("Enter the name of your Project:");t.createNewProject(n);const o=document.createElement("li");o.classList.add("projectItem"),o.textContent=n,e.appendChild(o)}))},displayProjects:()=>{t.getProjects().forEach((t=>{const n=document.createElement("li");n.classList.add("projectItem"),n.textContent=t,e.appendChild(n)}))}}})(),o=t=>{(()=>{const e=document.querySelector("#taskList"),t=document.querySelector("#listOfTasks");t&&e.removeChild(t);const n=document.createElement("ul");n.id="listOfTasks",e.append(n)})();const n=document.querySelector("#listOfTasks");for(let o of t){let t=document.createElement("li");t.classList.add("tasks");let c=document.createElement("div"),d=document.createElement("input");d.type="checkbox",d.classList.add("checkbox"),d.setAttribute("id",o.title),console.log(e.isChecked(o)),e.isChecked(o)&&(d.checked=!0),c.append(d);let l=document.createElement("span");l.textContent=o.title,c.append(l),t.append(c);let r=document.createElement("div"),a=document.createElement("button");a.classList.add("infoTask"),a.textContent="Info",r.append(a);let i=document.createElement("button");i.classList.add("editTask"),i.textContent="Edit",r.append(i);let s=document.createElement("button");s.classList.add("deleteTask"),s.textContent="delete",r.append(s),t.append(r),n.append(t)}},c=(()=>{const t=document.querySelector(".addTaskButton"),n=document.querySelector("#modal-overlay"),o=document.querySelector(".cancel"),c=document.querySelector("#modal"),d=(document.querySelector(".formHeader"),document.querySelector(".formButtons"),()=>{n.style.display="flex"}),l=()=>{n.style.display="none"},r=()=>{document.querySelector("#modal-content")&&c.removeChild(document.querySelector("#modal-content"));const e=document.createElement("div");e.setAttribute("id","modal-content");const t=document.createElement("h2");t.classList.add("formHeader"),t.textContent="Add Task",e.append(t);const n=document.createElement("form"),o=document.createElement("div");o.classList.add("titleInput");const r=document.createElement("label");r.setAttribute("for","title"),r.textContent="Title";const a=document.createElement("input");a.type="text",a.setAttribute("id","title"),o.appendChild(r),o.appendChild(a),n.appendChild(o);const s=document.createElement("div");s.classList.add("descriptionInput");const u=document.createElement("label");u.setAttribute("for","description"),u.textContent="Description";const m=document.createElement("input");m.type="text",m.setAttribute("id","description"),s.appendChild(u),s.appendChild(m),n.appendChild(s);const p=document.createElement("div");p.classList.add("dateInput");const C=document.createElement("label");C.setAttribute("for","date"),C.textContent="Due Date";const E=document.createElement("input");E.type="date",E.setAttribute("id","date"),p.appendChild(C),p.appendChild(E),n.appendChild(p);const y=document.createElement("div");y.classList.add("priorityInput");const k=document.createElement("label");k.setAttribute("for","priority"),k.textContent="Priority";const v=document.createElement("select");v.setAttribute("name","priority"),v.setAttribute("id","priority");const h=document.createElement("option");h.textContent="Low",h.setAttribute("value","low");const S=document.createElement("option");S.textContent="Medium",S.setAttribute("value","medium");const f=document.createElement("option");f.textContent="High",f.setAttribute("value","high"),v.appendChild(h),v.appendChild(S),v.appendChild(f),y.appendChild(k),y.appendChild(v),n.appendChild(y);const x=document.createElement("div");x.classList.add("formButtons");const q=document.createElement("button");q.classList.add("submit"),q.textContent="Submit";const b=document.createElement("button");b.classList.add("cancel"),b.textContent="Cancel",x.appendChild(q),x.appendChild(b),e.appendChild(n),e.appendChild(x),c.appendChild(e),d(),b.addEventListener("click",(()=>l())),i()};return t.addEventListener("click",(()=>{r()})),o.addEventListener("click",(e=>{e.preventDefault(),l(),[...document.querySelectorAll("inputs")].forEach((e=>e.value=""))})),{infoModal:e=>{document.querySelector("#modal-content")&&c.removeChild(document.querySelector("#modal-content"));const t=document.createElement("div");t.setAttribute("id","modal-content");const n=document.createElement("h2");n.className="formHeader",n.textContent="Task Info",t.append(n);const o=document.createElement("div");o.classList.add("titleInput");const r=document.createElement("p");r.classList.add("infoInput"),r.textContent="Title",o.appendChild(r);const a=document.createElement("p");a.setAttribute("id","title"),a.textContent=e.title,o.append(a),t.append(o);const i=document.createElement("div");i.classList.add("descriptionInput");const s=document.createElement("p");s.classList.add("infoInput"),s.textContent="Description",i.appendChild(s);const u=document.createElement("p");u.setAttribute("id","description"),u.textContent=e.description,i.append(u),t.append(i);const m=document.createElement("div");m.classList.add("dateInput");const p=document.createElement("span");p.classList.add("infoInput"),p.textContent="Due Date",m.appendChild(p);const C=document.createElement("p");C.setAttribute("id","date"),C.textContent=e.dueDate,m.append(C),t.append(m);const E=document.createElement("div");E.classList.add("priorityInput");const y=document.createElement("p");y.classList.add("infoInput"),y.textContent="Priority",E.appendChild(y);const k=document.createElement("p");k.setAttribute("id","date"),k.textContent=e.priority,E.append(k),t.append(E);const v=document.createElement("div");v.classList.add("formButtons");const h=document.createElement("button");h.classList.add("cancel"),h.textContent="Close",v.append(h),t.appendChild(v),c.append(t),d(),h.addEventListener("click",(()=>l()))},editModal:t=>{r(),l();const n=document.querySelector(".formHeader"),o=document.querySelector("#title"),c=document.querySelector("#description"),a=document.querySelector("#date"),i=document.querySelector("#priority"),s=document.querySelector(".formButtons"),u=document.querySelector(".submit");s.removeChild(u);const m=document.createElement("button");m.classList.add("editSubmit"),m.textContent="Submit",s.prepend(m),o.value=t.title,c.value=t.description,a.value=t.dueDate,i.value=t.priority,n.textContent="Edit Task",d();let p=document.getElementById(t.title);m.addEventListener("click",(()=>{console.log("here"),e.editTask(t,o.value,c.value,a.value,i.value),p.id=t.title,p.nextElementSibling.textContent=t.title,l()}))},closeModal:l}})(),d=()=>{[...document.querySelectorAll(".infoTask")].forEach((t=>{t.addEventListener("click",(()=>{let n=t.parentElement.previousElementSibling.firstChild.id,o=e.returnTasks().filter((e=>e.title===n));c.infoModal(o[0])}))}))},l=()=>{[...document.querySelectorAll(".checkbox")].forEach((t=>{let n=e.returnTasks().filter((e=>e.title===t.id));t.checked?e.setChecked(n[0],!0):t.checked||e.setChecked(n[0],!1)}))},r=()=>{const t=[...document.querySelectorAll(".deleteTask")],n=document.querySelector("#listOfTasks");t.forEach((t=>{t.addEventListener("click",(()=>{let o=t.parentElement.previousElementSibling.firstChild.id,c=e.returnTasks().filter((e=>e.title===o));e.deleteTask(c[0]);let d=t.parentElement.parentElement;n.removeChild(d)}))}))},a=()=>{[...document.querySelectorAll(".editTask")].forEach((t=>{t.addEventListener("click",(()=>{let n=t.parentElement.previousElementSibling.firstChild.id,o=e.returnTasks().filter((e=>e.title===n));c.editModal(o[0])}))}))},i=()=>{const n=document.querySelector(".nameOfPage"),l=document.querySelector(".submit"),i=document.querySelector("#modal-overlay"),s=document.querySelector("#title"),u=document.querySelector("#description"),m=document.querySelector("#date"),p=document.querySelector("#priority"),C=document.querySelector(".titleInput"),E=document.createElement("p");l.addEventListener("click",(()=>{if(document.querySelectorAll(".infoTask"),""===s.value)E.classList.add("requiredField"),C.appendChild(E),E.textContent="This field is required.";else{if("All"===n.textContent)e.createNewTask(s.value,u.value,m.value,p.value),o(e.returnTasks()),s.value="",u.value="",m.value="",p.value="";else{let c=t.getProjects().indexOf(n.textContent);e.createNewTask(s.value,u.value,m.value,p.value,c);const d=e.returnTasks().filter((e=>e.projectIndex===c));o(d)}s.value="",u.value="",m.value="",p.value="",i.style.display="none",document.querySelector(".requiredField")&&C.removeChild(E),c.closeModal(),d(),r(),a()}}))};e.createNewTask("meow","description","date","low",0),t.initializeProjectsFromStorage(),e.initializeTasksFromStorage(),o(e.returnTasks()),n.displayProjects(),(()=>{n.newProjectItem();const c=document.querySelector(".all"),i=(document.querySelector(".today"),document.querySelector(".week"),document.querySelector(".completed"),document.querySelector(".nameOfPage"));c.addEventListener("click",(()=>{i.textContent="All",l(),o(e.returnTasks()),d(),r(),a()})),document.body.addEventListener("click",(function(n){if("projectItem"==n.target.className){i.textContent=n.target.textContent,l();let c=t.getProjects().indexOf(n.target.textContent);const s=e.returnTasks().filter((e=>e.projectIndex===c));o(s),d(),r(),a()}})),d(),r(),a()})()})();